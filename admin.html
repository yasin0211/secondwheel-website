
<!DOCTYPE html>
<html>
<head>
  <title>Second Wheel - Admin Upload</title>
  <script src="="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    form { background: #fff; padding: 20px; border-radius: 10px; max-width: 600px; margin: auto; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    h2 { text-align: center; color: #333; }
    label { font-weight: bold; margin-top: 10px; display: block; }
    input, select, textarea { width: 100%; padding: 8px; margin-bottom: 10px; }
    button { background: #e25a00; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
  </style>
</head>
<body>

<h2>Admin Vehicle Upload</h2>

<form id="vehicleForm">
  <label>Category</label>
  <select id="category" required>
    <option value="Car">Car</option>
    <option value="Bike">Bike</option>
    <option value="Scooter">Scooter</option>
  </select>

  <label>Brand</label>
  <input type="text" id="brand" required />

  <label>Model</label>
  <input type="text" id="model" required />

  <label>Year</label>
  <input type="text" id="year" required />

  <label>Price (₹)</label>
  <input type="text" id="price" required />

  <label>KM Driven</label>
  <input type="text" id="km" required />

  <label>City</label>
  <input type="text" id="city" required />

  <label>Fuel</label>
  <select id="fuel">
    <option value="Petrol">Petrol</option>
    <option value="Diesel">Diesel</option>
    <option value="CNG">CNG</option>
    <option value="Electric">Electric</option>
  </select>

  <label>Condition</label>
  <select id="condition">
    <option value="Excellent">Excellent</option>
    <option value="Good">Good</option>
    <option value="Average">Average</option>
  </select>

  <label>Ownership</label>
  <select id="owner">
    <option value="1st">1st</option>
    <option value="2nd">2nd</option>
    <option value="3rd">3rd</option>
    <option value="4th">4th</option>
  </select>

  <label>RC Available?</label>
  <select id="rc">
    <option value="Yes">Yes</option>
    <option value="No">No</option>
  </select>

  <label>Insurance Valid?</label>
  <select id="insurance">
    <option value="Yes">Yes</option>
    <option value="No">No</option>
  </select>

  <label>PUC Available?</label>
  <select id="puc">
    <option value="Yes">Yes</option>
    <option value="No">No</option>
  </select>

  <label>Images</label>
  <input type="file" id="images" accept="image/*" multiple required />

  <button type="submit">Upload Vehicle</button>
</form>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyB9oWFJalJtYdWdsVdZvUzteUbFbXh7gcg",
  authDomain: "second-wheel-81373.firebaseapp.com",
  projectId: "second-wheel-81373",
  storageBucket: "second-wheel-81373.appspot.com",
  messagingSenderId: "927066104290",
  appId: "1:927066104290:web:1fb76d73d76d3cafff59bb",
  measurementId: "G-HNQP7KJ54Y"
};

const app = firebase.initializeApp(firebaseConfig);
const storage = firebase.storage();
const db = firebase.firestore();

document.getElementById("vehicleForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const files = document.getElementById("images").files;
  if (!files.length) {
    alert("❌ Please select at least one image.");
    return;
  }

  const formData = {
    category: document.getElementById("category").value,
    brand: document.getElementById("brand").value,
    model: document.getElementById("model").value,
    year: document.getElementById("year").value,
    price: document.getElementById("price").value,
    km: document.getElementById("km").value,
    city: document.getElementById("city").value,
    fuel: document.getElementById("fuel").value,
    condition: document.getElementById("condition").value,
    owner: document.getElementById("owner").value,
    rc: document.getElementById("rc").value,
    insurance: document.getElementById("insurance").value,
    puc: document.getElementById("puc").value,
    timestamp: firebase.firestore.FieldValue.serverTimestamp()
  };

  const imageUrls = [];
  for (let i = 0; i < files.length; i++) {
    const file = files[i];
    const ref = storage.ref("vehicles/" + Date.now() + "_" + file.name);
    await ref.put(file);
    const url = await ref.getDownloadURL();
    imageUrls.push(url);
  }

  formData.images = imageUrls;

  try {
    await db.collection("vehicles").add(formData);
    alert("✅ Vehicle uploaded successfully!");
    document.getElementById("vehicleForm").reset();
  } catch (error) {
    console.error("Error uploading:", error);
    alert("❌ Failed to upload: " + error.message);
  }
});
</script>

</body>
</html>
