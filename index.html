<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Second Wheel ‚Äì Trusted Vehicles, Smart Deals</title>
<meta name="theme-color" content="#111827" />
<style>
  :root{
    --bg:#0b0f17; --panel:#121826; --ink:#e5e7eb; --muted:#9aa3b2;
    --line:rgba(255,255,255,.10); --brand:#f59e0b; --shadow:0 10px 30px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font:14px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  a{color:inherit;text-decoration:none}
  img{max-width:100%;display:block}

  /* Header (NO navbar links here) */
  header{position:sticky;top:0;z-index:20;background:rgba(11,15,23,.75);backdrop-filter:blur(10px);border-bottom:1px solid var(--line)}
  .wrap{max-width:1160px;margin:0 auto;padding:16px}
  .nav{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .brand{display:flex;align-items:center;gap:12px}
  .brand img{
    height:auto;
    width:clamp(48px, 8vw, 100px);  /* auto responsive logo */
    border-radius:14px;box-shadow:var(--shadow)
  }
  .brand-name{font-weight:800;letter-spacing:.3px}
  .sub{color:var(--muted);font-size:12px}
  .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid var(--line);
       background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));cursor:pointer}
  .btn.primary{background:linear-gradient(180deg,#f59e0b,#b45309);border-color:transparent;color:#111;font-weight:700}
  .btn.ghost{background:transparent}

  /* Sections */
  .section{margin-top:18px}
  .grid{display:grid;gap:14px}
  @media(min-width:720px){ .grid.cols-3{grid-template-columns:repeat(3,1fr)} }
  @media(min-width:1024px){ .grid.cols-5{grid-template-columns:repeat(5,1fr)} }
  .card{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:14px;box-shadow:var(--shadow);text-align:center}

  /* Featured */
  .fgrid{
    display:grid;gap:16px;
    grid-template-columns:repeat(auto-fit, minmax(250px, 1fr)); /* auto cards */
  }
  .fcard{background:var(--panel);border:1px solid var(--line);border-radius:14px;overflow:hidden;box-shadow:var(--shadow)}
  .fimg{width:100%;height:200px;object-fit:cover;display:block;background:#0f1522}
  @media(min-width:720px){ .fimg{height:220px} }
  .fbody{padding:12px}
  .row{display:flex;align-items:center;justify-content:space-between;gap:10px}
  .muted{color:var(--muted)}
  .pill-badge{padding:4px 10px;border-radius:999px;background:var(--brand);color:#111;font-weight:700;font-size:12px}
  .empty{padding:14px;text-align:center;color:var(--muted);border:1px dashed var(--line);border-radius:12px}

  /* Tools */
  .toolcard{display:flex;gap:10px;align-items:center;justify-content:center}
  .toolicon{width:36px;height:36px;border-radius:10px;background:rgba(255,255,255,.06);display:grid;place-items:center}

  /* Footer + WhatsApp */
  footer{background:#0c121e;border-top:1px solid var(--line);margin-top:20px}
  footer a{color:#f6c558}
  .footer-cols{display:grid;gap:16px}
  @media(min-width:720px){ .footer-cols{grid-template-columns:repeat(4,1fr)} }
  .wa{position:fixed;right:16px;bottom:86px}
  .wa a{display:flex;align-items:center;gap:8px;padding:10px 14px;border-radius:999px;background:#25D366;color:#111;font-weight:700;box-shadow:var(--shadow)}
</style>
</head>
<body>
  <!-- HEADER (no navbar) -->
  <header>
    <div class="wrap">
      <div class="nav">
        <div class="brand">
          <img src="https://wbjwvxckbfkutqqbgupq.supabase.co/storage/v1/object/public/vehicals/logo.png" alt="Second Wheel logo">
          <div>
            <div class="brand-name">SECOND WHEEL</div>
            <div class="sub">Trusted Vehicles, Smart Deals</div>
          </div>
        </div>
        <div class="nav-actions">
          <a class="btn primary" href="https://wa.me/919822292955" target="_blank" rel="noopener">Chat / Inquiry</a>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <!-- Quick Buy/Sell -->
    <section class="section">
      <div class="grid cols-3">
        <a class="card" href="buy.html">Buy Car</a>
        <a class="card" href="buybike.html">Buy Bike</a>
        <a class="card" href="buyscooter.html">Buy Scooter</a>
      </div>
    </section>

    <!-- Sell -->
    <section class="section">
      <div class="grid cols-3">
        <a class="card" href="sell.html#car">Sell Car</a>
        <a class="card" href="sell.html#bike">Sell Bike</a>
        <div class="card muted">Satara District only (Door-step inspection)</div>
      </div>
    </section>

    <!-- Featured -->
    <section class="section">
      <div class="row" style="margin-bottom:8px">
        <h2 style="margin:0">Featured Vehicles</h2>
        <a href="buy.html" class="btn ghost">View all</a>
      </div>
      <div id="featGrid" class="fgrid">
        <div class="empty">Loading‚Ä¶</div>
      </div>
    </section>

    <!-- Tools & Services (featured ‡§ñ‡§æ‡§≤‡•Ä‡§ö) -->
    <section class="section">
      <h2 style="margin:0 0 8px">Tools & Services</h2>
      <div class="grid cols-5">
        <a class="card" href="https://maharashtra.hsrp.in" target="_blank" rel="noopener">
          <div class="toolcard"><span class="toolicon">üîñ</span><div><strong>HSRP Booking</strong><div class="muted">Official site</div></div></div>
        </a>
        <a class="card" href="https://mahatrafficechallan.gov.in/" target="_blank" rel="noopener">
          <div class="toolcard"><span class="toolicon">üßæ</span><div><strong>Pay Challan</strong><div class="muted">Maharashtra</div></div></div>
        </a>
        <a class="card" href="insurance.html">
          <div class="toolcard"><span class="toolicon">üõ°Ô∏è</span><div><strong>Insurance</strong><div class="muted">Buy / Renew</div></div></div>
        </a>
        <a class="card" href="tools.html#fastag">
          <div class="toolcard"><span class="toolicon">üè∑Ô∏è</span><div><strong>FASTag</strong><div class="muted">Buy / Recharge</div></div></div>
        </a>
        <a class="card" href="https://parivahan.gov.in" target="_blank" rel="noopener">
          <div class="toolcard"><span class="toolicon">üé´</span><div><strong>Driving Licence</strong><div class="muted">Apply Online</div></div></div>
        </a>
      </div>
    </section>
  </main>

  <!-- WhatsApp Floating -->
  <div class="wa"><a href="https://wa.me/919822292955" target="_blank" rel="noopener">WhatsApp</a></div>

  <!-- Footer (FULL links) -->
  <footer>
    <div class="wrap" style="padding:22px 0">
      <div class="footer-cols">
        <div>
          <h3>Second Wheel</h3>
          <p class="muted">Trusted Vehicles, Smart Deals</p>
        </div>
        <div>
          <h4>Company</h4>
          <a href="about.html">About Us</a>
          <a href="contact.html">Contact Us</a>
          <a href="wishlist.html">Wishlist</a>
        </div>
        <div>
          <h4>Legal</h4>
          <a href="terms.html">Terms &amp; Conditions</a>
          <a href="privacy.html">Privacy Policy</a>
          <a href="disclaimer.html">Disclaimer</a>
        </div>
        <div>
          <h4>More</h4>
          <a href="testimonials.html">Testimonials</a>
          <a href="faq.html">FAQ</a>
          <a href="news.html">Blog/News</a>
        </div>
      </div>
      <div class="muted" style="margin-top:12px;text-align:center">¬© <span id="yr"></span> Second Wheel ‚Äî All rights reserved.</div>
    </div>
  </footer>

  <!-- Supabase Featured Loader -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const SUPABASE_URL='https://wbjwvxckbfkutqqbgupq.supabase.co';
    const SUPABASE_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indiand2eGNrYmZrdXRxcWJndXBxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NzU3NDEsImV4cCI6MjA2OTQ1MTc0MX0.u_zwikgAryhF5Ccv5yOvjq20hzxE5tbYfKI04uTnNXw';
    const BUCKET='vehicals', ROOT='featured';
    const sb = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
    const grid = document.getElementById('featGrid');

    // Wishlist (local)
    const WL_KEY='sw_wishlist';
    const getWL=()=>{try{return JSON.parse(localStorage.getItem(WL_KEY)||'[]')}catch(e){return[]}};
    const setWL=(arr)=>localStorage.setItem(WL_KEY,JSON.stringify(arr));

    const purl = (path)=> sb.storage.from(BUCKET).getPublicUrl(path).data?.publicUrl || '';

    async function listFolders(){
      const {data,error}=await sb.storage.from(BUCKET).list(ROOT,{limit:500});
      if(error) return [];
      return (data||[]).filter(x=>x && !/\./.test(x.name)).map(x=>x.name);
    }
    async function readMeta(vid){
      const {data,error}=await sb.storage.from(BUCKET).download(`${ROOT}/${vid}/meta.json`);
      if(error||!data) return null;
      try{ return JSON.parse(await data.text()); }catch(_){ return null; }
    }
    async function firstImage(vid){
      const {data}=await sb.storage.from(BUCKET).list(`${ROOT}/${vid}`,{limit:200});
      const im=(data||[]).find(o=>/\.(jpg|jpeg|png|webp)$/i.test(o.name));
      return im? purl(`${ROOT}/${vid}/${im.name}`) : '';
    }

    async function loadFeatured(){               // unlimited cards (auto)
      grid.innerHTML='<div class="empty">Loading‚Ä¶</div>';
      const folders = await listFolders();
      if(!folders.length){ grid.innerHTML='<div class="empty">No featured vehicles yet</div>'; return; }
      const rows=[];
      for(const vid of folders){
        const [meta,img] = await Promise.all([readMeta(vid), firstImage(vid)]);
        if(!meta) continue;
        rows.push({vid, ...meta, img});
      }
      rows.sort((a,b)=>(b.updatedAt||'').localeCompare(a.updatedAt||''));

      const wl=getWL();
      grid.innerHTML='';
      for(const v of rows){
        const waTxt=encodeURIComponent(`Hi, I'm interested in ${v.title||v.vid} (${v.brand||''}) ‚Äî Price: ${v.price||''}`);
        const wa=`https://wa.me/919822292955?text=${waTxt}`;
        const card=document.createElement('article');
        card.className='fcard';
        card.innerHTML=`
          <img class="fimg" src="${v.img||'https://dummyimage.com/1200x800/111827/ffffff&text=No+Image'}" alt="${v.title||v.vid}">
          <div class="fbody">
            <div class="row">
              <span class="pill-badge">Featured</span>
              <strong>${v.price||''}</strong>
            </div>
            <h3 style="margin:8px 0 4px">${v.title||v.vid}</h3>
            <div class="muted">${(v.brand||'').toUpperCase()} ${v.year?('‚Ä¢ '+v.year):''} ${v.km?('‚Ä¢ '+v.km+' km'):''}</div>
            <div class="row" style="margin-top:8px">
              <button class="btn js-wl">${wl.includes(v.vid)?'‚ô• In wishlist':'‚ô° Wishlist'}</button>
              <a class="btn primary" href="${wa}" target="_blank" rel="noopener">Inquiry Now</a>
            </div>
          </div>`;
        card.querySelector('.js-wl').addEventListener('click',(e)=>{
          let a=getWL();
          if(a.includes(v.vid)){ a=a.filter(x=>x!==v.vid); e.currentTarget.textContent='‚ô° Wishlist'; }
          else{ a.push(v.vid); e.currentTarget.textContent='‚ô• In wishlist'; }
          setWL(a);
        });
        grid.appendChild(card);
      }
    }

    document.getElementById('yr').textContent = new Date().getFullYear();
    loadFeatured();
  </script>
</body>
</html>
