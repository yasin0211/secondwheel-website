<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Second Wheel â€“ Trusted Vehicles, Smart Deals</title>
<meta name="theme-color" content="#111827" />
<style>
  :root{
    --bg:#0b0f17; --card:#121826; --muted:#9aa3b2; --text:#e5e7eb;
    --brand:#f59e0b; --ok:#22c55e; --shadow:0 8px 28px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);
       font:14px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica,Arial}
  a{color:inherit;text-decoration:none}
  img{max-width:100%;display:block}
  .container{max-width:1160px;margin:0 auto;padding:16px}

  /* Header / Brand */
  header{position:sticky;top:0;z-index:30;background:rgba(11,15,23,.75);
         backdrop-filter:blur(12px);border-bottom:1px solid rgba(255,255,255,.08)}
  .head{display:flex;justify-content:space-between;align-items:center;gap:12px}
  .brand{display:flex;gap:12px;align-items:center}
  .brand img{width:clamp(42px,7vw,64px);height:clamp(42px,7vw,64px);border-radius:12px;object-fit:contain;background:#0e1522;box-shadow:var(--shadow)}
  .brand h1{margin:0;font-weight:800;letter-spacing:.3px;font-size:clamp(18px,2.8vw,24px)}
  .subtitle{margin:0;color:#cbd5e1;font-size:clamp(12px,2.2vw,14px)}
  .toolbar{display:flex;gap:8px;align-items:center}
  .seg{display:inline-flex;border:1px solid rgba(255,255,255,.12);border-radius:999px;overflow:hidden}
  .seg button{border:0;background:transparent;padding:8px 10px;color:var(--text);cursor:pointer}
  .seg button.active{background:rgba(255,255,255,.16)}
  .iconbtn{border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);
           padding:8px 10px;border-radius:10px;cursor:pointer}

  /* Quick actions row (under header, above featured) */
  .actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:14px 0 4px}
  .vbtn{display:inline-flex;align-items:center;justify-content:center;gap:8px;
        padding:12px 16px;border-radius:14px;border:1px solid rgba(255,255,255,.1);
        background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
        min-width:120px; font-weight:700}
  .vbtn.primary{background:linear-gradient(180deg,#f59e0b,#b45309);color:#111;border-color:transparent}

  /* Sections */
  .section-title{margin:18px 0 10px;font-size:20px}
  .row{display:flex;gap:12px;overflow:auto;scroll-snap-type:x mandatory;padding:2px 2px 6px}
  .row>*{scroll-snap-align:center}

  /* Vehicle card */
  .vehicle{min-width:300px;background:var(--card);border:1px solid rgba(255,255,255,.08);
           border-radius:18px;box-shadow:var(--shadow)}
  .media{position:relative}
  .imgwrap{width:100%;height:clamp(200px,28vw,260px);overflow:hidden}
  .imgwrap img{width:100%;height:100%;object-fit:cover;display:block}
  .tag{position:absolute;top:10px;left:10px;background:var(--brand);color:#111;
       padding:4px 8px;border-radius:999px;font-weight:700;font-size:12px}
  .body{padding:12px}
  .title{font-weight:800;font-size:16px;margin:0 0 2px}
  .brandline{color:#cbd5e1;margin-bottom:4px}
  .meta{display:flex;justify-content:space-between;color:#cbd5e1;font-weight:700;margin:6px 0 10px}
  .desc{color:#d1d5db;white-space:pre-wrap}
  .actions-inline{display:flex;gap:8px;margin-top:12px}
  .btn-pill{padding:10px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.18);
            background:rgba(255,255,255,.06)}
  .btn-primary{background:linear-gradient(180deg,#f59e0b,#b45309);color:#111;border-color:transparent}

  /* Tools grid */
  .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  @media(min-width:720px){.grid{grid-template-columns:repeat(4,1fr)}}
  .card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:16px}

  /* Footer */
  footer{border-top:1px solid rgba(255,255,255,.08);background:#0c121e;margin-top:26px}
  footer .cols{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
  @media(min-width:720px){footer .cols{grid-template-columns:repeat(4,1fr)}}
  footer a{display:block;padding:6px 0;color:#cbd5e1}

  /* WhatsApp floating */
  .whatsapp{position:fixed;right:16px;bottom:20px;z-index:40}
  .wa{display:flex;align-items:center;gap:8px;background:#25D366;color:#111;
      padding:12px 14px;border-radius:999px;font-weight:800;box-shadow:var(--shadow)}

  /* Toast */
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:16px;background:#111827;color:#e5e7eb;
         border:1px solid rgba(255,255,255,.08);padding:10px 14px;border-radius:10px;box-shadow:var(--shadow);
         opacity:0;pointer-events:none;transition:opacity .3s}
  .toast.show{opacity:1}
</style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="container head">
      <div class="brand">
        <img src="https://wbjwvxckbfkutqqbgupq.supabase.co/storage/v1/object/public/vehicals/logo.png" alt="Second Wheel Logo">
        <div>
          <h1>SECOND WHEEL</h1>
          <p class="subtitle">Trusted Vehicles, Smart Deals</p>
        </div>
      </div>
      <div class="toolbar">
        <div id="langSeg" class="seg" aria-label="Language">
          <button data-lang="en" class="active">EN</button>
          <button data-lang="hi">HI</button>
          <button data-lang="mr">MR</button>
        </div>
        <button id="darkToggle" class="iconbtn" aria-label="Toggle dark">ðŸŒ™</button>
      </div>
    </div>

    <!-- QUICK ACTION BUTTONS (under header) -->
    <div class="container actions" aria-label="Quick actions">
      <a class="vbtn primary" href="buy.html" data-i18n="nav.buy">Buy</a>
      <a class="vbtn" href="sell.html" data-i18n="nav.sell">Sell</a>
      <a class="vbtn" href="valuation.html" data-i18n="nav.valuation">Valuation</a>
      <a class="vbtn" href="tools.html" data-i18n="nav.tools">Tools</a>
    </div>
  </header>

  <!-- MAIN -->
  <main class="container">
    <!-- FEATURED -->
    <h3 class="section-title" data-i18n="feat.title">Featured Vehicles</h3>
    <div id="vehiclesRow" class="row" aria-live="polite"></div>

    <!-- TOOLS -->
    <h3 class="section-title" data-i18n="tools.title">Tools & Services</h3>
    <div class="grid">
      <a class="card" href="insurance.html">
        <h4 data-i18n="tools.insurance">Insurance</h4>
        <div class="muted" data-i18n="tools.insurance_sub">Buy / Renew</div>
      </a>
      <a class="card" href="tools.html#fastag">
        <h4 data-i18n="tools.fastag">FASTag</h4>
        <div class="muted" data-i18n="tools.fastag_sub">Recharge or Buy</div>
      </a>
      <a class="card" href="valuation.html">
        <h4 data-i18n="tools.valuation">Valuation</h4>
        <div class="muted" data-i18n="tools.valuation_sub">Instant estimate</div>
      </a>
      <a class="card" href="https://hsrpmhzone2.in/" target="_blank" rel="noopener">
        <h4 data-i18n="tools.hsrp">HSRP Plate</h4>
        <div class="muted" data-i18n="tools.hsrp_sub">Official portal</div>
      </a>
      <a class="card" href="https://mahatrafficechallan.gov.in/" target="_blank" rel="noopener">
        <h4 data-i18n="tools.challan">Challan Payment</h4>
        <div class="muted" data-i18n="tools.challan_sub">Maharashtra</div>
      </a>
    </div>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="container">
      <div class="cols" style="padding:20px 0 8px">
        <div>
          <h3>Second Wheel</h3>
          <p class="muted">Trusted Vehicles, Smart Deals</p>
        </div>
        <div>
          <h4>Company</h4>
          <a href="about.html">About Us</a>
          <a href="contact.html">Contact Us</a>
        </div>
        <div>
          <h4>Legal</h4>
          <a href="terms.html">Terms & Conditions</a>
          <a href="privacy.html">Privacy Policy</a>
          <a href="disclaimer.html">Disclaimer</a>
        </div>
        <div>
          <h4>Follow</h4>
          <a href="#">Instagram</a>
          <a href="#">Facebook</a>
        </div>
      </div>
      <div class="muted" style="padding:8px 0 24px">Â© <span id="yr"></span> Second Wheel â€“ All rights reserved.</div>
    </div>
  </footer>

  <!-- WhatsApp -->
  <div class="whatsapp">
    <a class="wa" href="https://wa.me/919822292955" target="_blank" rel="noopener">WhatsApp</a>
  </div>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script>
  // ===== i18n strings =====
  const I18N = {
    en:{
      'nav.buy':'Buy','nav.sell':'Sell','nav.valuation':'Valuation','nav.tools':'Tools',
      'feat.title':'Featured Vehicles','tools.title':'Tools & Services',
      'tools.insurance':'Insurance','tools.insurance_sub':'Buy / Renew',
      'tools.fastag':'FASTag','tools.fastag_sub':'Recharge or Buy',
      'tools.valuation':'Valuation','tools.valuation_sub':'Instant estimate',
      'tools.hsrp':'HSRP Plate','tools.hsrp_sub':'Official portal',
      'tools.challan':'Challan Payment','tools.challan_sub':'Maharashtra',
      'ui.featured':'Featured','ui.wishlist.add':'â™¡ Wishlist','ui.wishlist.added':'â™¥ Wishlist','ui.enquire':'Enquire Now'
    },
    hi:{
      'nav.buy':'à¤–à¤°à¥€à¤¦à¥‡à¤‚','nav.sell':'à¤¬à¥‡à¤šà¥‡à¤‚','nav.valuation':'à¤µà¥ˆà¤²à¥à¤¯à¥‚à¤à¤¶à¤¨','nav.tools':'à¤Ÿà¥‚à¤²à¥à¤¸',
      'feat.title':'à¤«à¤¼à¥€à¤šà¤°à¥à¤¡ à¤µà¤¾à¤¹à¤¨','tools.title':'à¤Ÿà¥‚à¤²à¥à¤¸ à¤µ à¤¸à¥‡à¤µà¤¾à¤à¤',
      'tools.insurance':'à¤‡à¤‚à¤¶à¥à¤¯à¥‹à¤°à¥‡à¤‚à¤¸','tools.insurance_sub':'à¤–à¤°à¥€à¤¦à¥‡à¤‚ / à¤°à¤¿à¤¨à¥à¤¯à¥‚',
      'tools.fastag':'à¤«à¤¼à¤¾à¤¸à¥à¤Ÿà¥ˆà¤—','tools.fastag_sub':'à¤°à¥€à¤šà¤¾à¤°à¥à¤œ à¤¯à¤¾ à¤–à¤°à¥€à¤¦à¥‡à¤‚',
      'tools.valuation':'à¤µà¥ˆà¤²à¥à¤¯à¥‚à¤à¤¶à¤¨','tools.valuation_sub':'à¤¤à¥à¤°à¤‚à¤¤ à¤…à¤¨à¥à¤®à¤¾à¤¨',
      'tools.hsrp':'HSRP à¤ªà¥à¤²à¥‡à¤Ÿ','tools.hsrp_sub':'à¤‘à¤«à¤¿à¤¶à¤¿à¤¯à¤² à¤ªà¥‹à¤°à¥à¤Ÿà¤²',
      'tools.challan':'à¤šà¤²à¤¾à¤¨ à¤­à¥à¤—à¤¤à¤¾à¤¨','tools.challan_sub':'à¤®à¤¹à¤¾à¤°à¤¾à¤·à¥à¤Ÿà¥à¤°',
      'ui.featured':'à¤«à¤¼à¥€à¤šà¤°à¥à¤¡','ui.wishlist.add':'â™¡ à¤µà¤¿à¤¶à¤²à¤¿à¤¸à¥à¤Ÿ','ui.wishlist.added':'â™¥ à¤µà¤¿à¤¶à¤²à¤¿à¤¸à¥à¤Ÿ','ui.enquire':'à¤‡à¤¨à¥à¤•à¥à¤µà¤¾à¤¯à¤° à¤•à¤°à¥‡à¤‚'
    },
    mr:{
      'nav.buy':'à¤–à¤°à¥‡à¤¦à¥€','nav.sell':'à¤µà¤¿à¤•à¥à¤°à¥€','nav.valuation':'à¤®à¥‚à¤²à¥à¤¯à¤¾à¤‚à¤•à¤¨','nav.tools':'à¤¸à¤¾à¤§à¤¨à¥‡',
      'feat.title':'à¤«à¥€à¤šà¤°à¥à¤¡ à¤µà¤¾à¤¹à¤¨à¥‡','tools.title':'à¤Ÿà¥‚à¤²à¥à¤¸ à¤µ à¤¸à¥‡à¤µà¤¾',
      'tools.insurance':'à¤µà¤¿à¤®à¤¾','tools.insurance_sub':'à¤–à¤°à¥‡à¤¦à¥€ / à¤¨à¥‚à¤¤à¤¨à¥€à¤•à¤°à¤£',
      'tools.fastag':'FASTag','tools.fastag_sub':'à¤°à¤¿à¤šà¤¾à¤°à¥à¤œ/à¤–à¤°à¥‡à¤¦à¥€',
      'tools.valuation':'à¤®à¥‚à¤²à¥à¤¯à¤¾à¤‚à¤•à¤¨','tools.valuation_sub':'à¤¤à¤¾à¤¤à¥à¤•à¤¾à¤³ à¤…à¤‚à¤¦à¤¾à¤œ',
      'tools.hsrp':'HSRP à¤ªà¥à¤²à¥‡à¤Ÿ','tools.hsrp_sub':'à¤…à¤§à¤¿à¤•à¥ƒà¤¤ à¤ªà¥‹à¤°à¥à¤Ÿà¤²',
      'tools.challan':'à¤šà¤²à¤¨ à¤­à¤°à¤£à¤¾','tools.challan_sub':'à¤®à¤¹à¤¾à¤°à¤¾à¤·à¥à¤Ÿà¥à¤°',
      'ui.featured':'à¤«à¥€à¤šà¤°à¥à¤¡','ui.wishlist.add':'â™¡ à¤µà¤¿à¤¶à¤²à¤¿à¤¸à¥à¤Ÿ','ui.wishlist.added':'â™¥ à¤µà¤¿à¤¶à¤²à¤¿à¤¸à¥à¤Ÿ','ui.enquire':'à¤šà¥Œà¤•à¤¶à¥€ à¤•à¤°à¤¾'
    }
  };
  const langSeg=document.getElementById('langSeg');
  function t(k){ const l=localStorage.getItem('lang')||'en'; return (I18N[l]&&I18N[l][k])||(I18N.en[k]||k); }
  function applyLang(l){
    localStorage.setItem('lang',l);
    [...langSeg.querySelectorAll('button')].forEach(b=>b.classList.toggle('active', b.dataset.lang===l));
    document.querySelectorAll('[data-i18n]').forEach(el=>{ const v=t(el.dataset.i18n); if(v) el.textContent=v; });
    toast('Language: '+l.toUpperCase());
  }
  langSeg.addEventListener('click',e=>{ if(e.target.tagName==='BUTTON') applyLang(e.target.dataset.lang); });

  // Dark toggle
  const DKEY='secondwheel.dark', darkBtn=document.getElementById('darkToggle');
  function applyDark(v){ document.documentElement.style.colorScheme=v?'dark':'light';
    localStorage.setItem(DKEY,v?'1':'0'); darkBtn.textContent=v?'ðŸŒ™':'â˜€ï¸';}
  darkBtn.addEventListener('click',()=>applyDark(!(localStorage.getItem(DKEY)==='1')));
  applyDark(localStorage.getItem(DKEY)==='1');

  // Footer year
  document.getElementById('yr').textContent=new Date().getFullYear();

  // Toast
  function toast(msg){ let t=document.getElementById('toast'); if(!t){t=document.createElement('div');t.id='toast';t.className='toast';document.body.appendChild(t);}
    t.textContent=msg;t.classList.add('show');clearTimeout(window.__t);window.__t=setTimeout(()=>t.classList.remove('show'),1500); }

  // ===== Supabase: Load Featured =====
  const SUPABASE_URL='https://wbjwvxckbfkutqqbgupq.supabase.co';
  const SUPABASE_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indiand2eGNrYmZrdXRxcWJndXBxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NzU3NDEsImV4cCI6MjA2OTQ1MTc0MX0.u_zwikgAryhF5Ccv5yOvjq20hzxE5tbYfKI04uTnNXw';
  const BUCKET='vehicals';
  const sb=window.supabase.createClient(SUPABASE_URL,SUPABASE_KEY);

  const vehiclesRow=document.getElementById('vehiclesRow');

  function pub(path){ const {data}=sb.storage.from(BUCKET).getPublicUrl(path); return data?.publicUrl || `${SUPABASE_URL}/storage/v1/object/public/${path}`; }
  function wishKey(slug){ return 'wish:'+slug; }

  async function listFolders(root){
    const {data,error}=await sb.storage.from(BUCKET).list(root,{limit:1000});
    if(error) return [];
    return (data||[]).filter(x=>!x.name.includes('.')).map(x=>x.name);
  }
  async function readMeta(path){
    const {data,error}=await sb.storage.from(BUCKET).download(path);
    if(error) return null;
    try{ return JSON.parse(await data.text()); }catch{ return null; }
  }
  async function listImages(dir){
    const {data,error}=await sb.storage.from(BUCKET).list(dir,{limit:1000});
    if(error) return [];
    return (data||[]).filter(o=>/\.(jpg|jpeg|png|webp)$/i.test(o.name)).map(o=>pub(`${dir}/${o.name}`));
  }

  async function loadFeatured(){
    vehiclesRow.innerHTML='<div class="muted">Loadingâ€¦</div>';
    // folders directly under bucket (each is a vehicle):  vehicals/<slug>/{meta.json, imagesâ€¦}
    const folders=await listFolders('');
    const items=[];
    for(const f of folders){
      const meta=await readMeta(`${f}/meta.json`);
      if(!meta) continue;
      const imgs=await listImages(f);
      items.push({slug:f, imgs, ...meta});
    }
    if(!items.length){ vehiclesRow.innerHTML='<div class="muted">No items yet</div>'; return; }
    vehiclesRow.innerHTML='';
    items.sort((a,b)=> (b.updatedAt||'').localeCompare(a.updatedAt||''));
    for(const it of items){
      const card=document.createElement('article'); card.className='vehicle';
      const img = it.imgs?.[0] || '';
      const price = it.price || '';
      const title = it.title || it.slug || '';
      const yearKm = [it.year||'', it.km?`${it.km} km`:'' ].filter(Boolean).join(' â€¢ ');
      const brand = (it.brand||'').toUpperCase();
      const desc = it.description || '';
      card.innerHTML = `
        <div class="media">
          <div class="imgwrap"><img src="${img}" alt="${title}" loading="lazy"></div>
          <span class="tag">${t('ui.featured')}</span>
        </div>
        <div class="body">
          <div class="meta"><span class="title">${title}</span><span>${price}</span></div>
          <div class="brandline">${brand}</div>
          <div class="brandline">${yearKm}</div>
          <div class="desc">${desc}</div>
          <div class="actions-inline">
            <button class="btn-pill" data-wish="${it.slug}">${t('ui.wishlist.add')}</button>
            <a class="btn-pill btn-primary" target="_blank"
               href="https://wa.me/919822292955?text=${encodeURIComponent('Inquiry: '+title+' | Price: '+price)}">${t('ui.enquire')}</a>
          </div>
        </div>`;
      const w=card.querySelector('[data-wish]');
      if(localStorage.getItem(wishKey(it.slug))==='1'){ w.textContent=t('ui.wishlist.added'); }
      w.addEventListener('click',()=>{
        const key=wishKey(it.slug);
        const cur=localStorage.getItem(key)==='1';
        localStorage.setItem(key,cur?'0':'1');
        w.textContent=t(cur?'ui.wishlist.add':'ui.wishlist.added');
        toast(cur?'Removed from wishlist':'Added to wishlist');
      });
      vehiclesRow.appendChild(card);
    }
  }

  // init
  applyLang(localStorage.getItem('lang')||'en');
  loadFeatured();
  </script>
</body>
</html>
