<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Second Wheel ‚Äî Sell & Valuation</title>
<meta name="theme-color" content="#0b0f17"/>
<style>
  :root{
    --bg:#0b0f17; --card:#121826; --text:#e5e7eb; --muted:#9aa3b2;
    --line:rgba(255,255,255,.12); --accent:#f59e0b; --ok:#22c55e; --warn:#ef4444;
    --shadow:0 12px 32px rgba(0,0,0,.35);
  }
  :root[data-theme="light"]{ --bg:#f7f8fb; --card:#fff; --text:#0b0f17; --muted:#5b667a; --line:rgba(0,0,0,.12) }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font:14px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu}
  a{color:inherit;text-decoration:none}
  img{max-width:100%;display:block}
  .wrap{max-width:980px;margin:0 auto;padding:16px}
  header{position:sticky;top:0;z-index:20;background:rgba(11,15,23,.78);backdrop-filter:blur(10px);border-bottom:1px solid var(--line)}
  .flex{display:flex;align-items:center;gap:10px}
  .space{justify-content:space-between}
  .brand img{width:44px;height:44px;border-radius:12px;box-shadow:var(--shadow)}
  .brand h1{margin:0;font-size:16px;letter-spacing:.35px}
  .seg{display:inline-flex;gap:6px;padding:6px;border:1px solid var(--line);border-radius:999px;background:rgba(255,255,255,.06)}
  .seg button{border:0;background:transparent;padding:8px 12px;border-radius:999px;color:var(--text);cursor:pointer}
  .seg button.active{background:var(--accent);color:#111;font-weight:800}
  .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid var(--line);background:rgba(255,255,255,.06);cursor:pointer}
  .btn.primary{background:linear-gradient(180deg,#f59e0b,#b45309);color:#111;border:none}
  .btn.ok{background:linear-gradient(180deg,#22c55e,#15803d);color:#111;border:none}
  .btn:disabled{opacity:.55;cursor:not-allowed}

  .card{background:var(--card);border:1px solid var(--line);border-radius:16px;box-shadow:var(--shadow)}
  .pad{padding:16px}
  .title{margin:0 0 8px;font-weight:900}
  .muted{color:var(--muted)}
  .row{display:grid;grid-template-columns:1fr;gap:10px}
  @media(min-width:720px){ .row{grid-template-columns:repeat(2,1fr)} }
  label{font-weight:700;margin:6px 2px;display:block}
  input,select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--line);background:#0f1626;color:var(--text);outline:none}
  :root[data-theme="light"] input,:root[data-theme="light"] select{background:#f3f4f6;color:#111}
  .chips{display:flex;flex-wrap:wrap;gap:8px}
  .chip{padding:10px 14px;border-radius:999px;border:1px solid var(--line);background:rgba(255,255,255,.06);cursor:pointer}
  .chip.active{background:var(--accent);color:#111;border-color:transparent;font-weight:800}
  .actions{display:flex;gap:10px;flex-wrap:wrap}
  .divider{height:1px;background:var(--line);margin:12px 0}

  /* Steps */
  .steps{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin:10px 0 14px}
  .step{padding:8px 10px;border-radius:12px;border:1px solid var(--line);background:rgba(255,255,255,.04);font-weight:700;text-align:center}
  .step.active{background:var(--accent);color:#111;border-color:transparent}
  .progress{height:6px;background:#1f2937;border-radius:999px;overflow:hidden;margin-top:6px}
  .bar{height:100%;background:linear-gradient(90deg,var(--accent),#ef4444);width:0%}

  /* Result */
  .gauge{position:relative;height:10px;background:#111827;border-radius:999px;overflow:hidden;border:1px solid var(--line)}
  .gauge > div{height:100%}
  .g1{background:#ef4444;width:33%} .g2{background:#f59e0b;width:34%} .g3{background:#22c55e;width:33%}
  .range{display:flex;justify-content:space-between;margin:6px 2px 0}
  .big{font-size:28px;font-weight:900}

  .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:rgba(255,255,255,.06);font-weight:700}

  /* Toast */
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:16px;background:#111827;color:#e5e7eb;border:1px solid var(--line);padding:10px 14px;border-radius:10px;box-shadow:var(--shadow);opacity:0;pointer-events:none;transition:opacity .25s}
  .toast.show{opacity:1}
</style>
</head>
<body>
<header>
  <div class="wrap flex space">
    <div class="brand flex">
      <img src="https://wbjwvxckbfkutqqbgupq.supabase.co/storage/v1/object/public/vehicals/logo.png" alt="Second Wheel">
      <h1>SECOND WHEEL</h1>
    </div>
    <div class="flex" style="gap:8px">
      <div class="seg" id="langSeg">
        <button data-lang="en" class="active">EN</button>
        <button data-lang="hi">HI</button>
        <button data-lang="mr">MR</button>
      </div>
      <button id="themeBtn" class="btn">üåô</button>
    </div>
  </div>
</header>

<main class="wrap" id="app">
  <!-- Progress -->
  <div class="card pad">
    <h2 class="title" data-i18n="title">Instant Valuation</h2>
    <div class="steps">
      <div class="step active" id="s1h" data-i18n="s1h">1. Customer</div>
      <div class="step" id="s2h" data-i18n="s2h">2. Vehicle</div>
      <div class="step" id="s3h" data-i18n="s3h">3. Specs</div>
      <div class="step" id="s4h" data-i18n="s4h">4. Condition</div>
      <div class="step" id="s5h" data-i18n="s5h">5. Result</div>
    </div>
    <div class="progress"><div class="bar" id="bar"></div></div>
  </div>

  <!-- STEP 1: CUSTOMER -->
  <section class="card pad" id="s1">
    <h3 class="title" data-i18n="s1.title">Customer Details</h3>
    <div class="row">
      <div>
        <label data-i18n="s1.name">Name</label>
        <input id="custName" placeholder="Your name"/>
      </div>
      <div>
        <label data-i18n="s1.phone">Mobile Number</label>
        <input id="custPhone" placeholder="10-digit" maxlength="10" inputmode="numeric"/>
      </div>
      <div>
        <label data-i18n="s1.city">City</label>
        <input id="city" placeholder="Satara"/>
      </div>
      <div>
        <label data-i18n="s1.notes">Notes (optional)</label>
        <input id="notes" placeholder="Any info‚Ä¶"/>
      </div>
    </div>
    <div class="actions" style="margin-top:12px">
      <button class="btn primary" id="next1" data-i18n="next">Continue</button>
    </div>
  </section>

  <!-- STEP 2: VEHICLE BASICS -->
  <section class="card pad" id="s2" hidden>
    <h3 class="title" data-i18n="s2.title">Vehicle Basics</h3>
    <div class="chips" id="typeChips">
      <button class="chip active" data-vtype="car">üöó Car</button>
      <button class="chip" data-vtype="bike">üèçÔ∏è Bike</button>
      <button class="chip" data-vtype="scooter">üõµ Scooter</button>
      <button class="chip" data-vtype="ev_car">‚ö° EV Car</button>
      <button class="chip" data-vtype="ev_2w">‚ö° EV 2W</button>
    </div>
    <div class="divider"></div>
    <div class="row">
      <div>
        <label data-i18n="s2.brand">Brand</label>
        <input id="brand" placeholder="Maruti / Hyundai / Honda‚Ä¶"/>
      </div>
      <div>
        <label data-i18n="s2.model">Model</label>
        <input id="model" placeholder="Swift / i10 / City / Splendor‚Ä¶"/>
      </div>
      <div>
        <label data-i18n="s2.reg">Registration No.</label>
        <input id="reg" placeholder="MH12 AB 1234"/>
      </div>
      <div>
        <label data-i18n="s2.seats">Seats (auto)</label>
        <input id="seats" placeholder="Auto" readonly/>
      </div>
      <div>
        <label data-i18n="s2.body">Body Type (auto)</label>
        <input id="bodyType" placeholder="Auto" readonly/>
      </div>
    </div>
    <div class="actions" style="margin-top:12px">
      <button class="btn" id="back2" data-i18n="back">Back</button>
      <button class="btn primary" id="next2" data-i18n="next">Continue</button>
    </div>
  </section>

  <!-- STEP 3: SPECS -->
  <section class="card pad" id="s3" hidden>
    <h3 class="title" data-i18n="s3.title">Specifications</h3>
    <div class="row">
      <div>
        <label data-i18n="s3.year">Manufacturing Year</label>
        <input id="year" type="number" min="1995" max="2099" placeholder="2018"/>
      </div>
      <div>
        <label data-i18n="s3.km">KMs Driven</label>
        <input id="km" type="number" min="0" step="500" placeholder="60000"/>
      </div>

      <div>
        <label data-i18n="s3.fuel">Fuel</label>
        <select id="fuel">
          <option value="Petrol">Petrol</option>
          <option value="Diesel">Diesel</option>
          <option value="CNG_CF">CNG (Company-fitted)</option>
          <option value="CNG_AF">CNG (Aftermarket)</option>
          <option value="LPG_CF">LPG (Company-fitted)</option>
          <option value="LPG_AF">LPG (Aftermarket)</option>
          <option value="Electric">Electric</option>
        </select>
      </div>
      <div id="transBox">
        <label data-i18n="s3.trans">Transmission</label>
        <select id="trans"><option>Manual</option><option>Automatic</option></select>
      </div>

      <div>
        <label data-i18n="s3.owners">Owners</label>
        <select id="owners"><option>1st</option><option>2nd</option><option>3rd</option><option>4th+</option></select>
      </div>
      <div>
        <label data-i18n="s3.color">Color</label>
        <select id="color"><option>White</option><option>Silver</option><option>Grey</option><option>Black</option><option>Blue</option><option>Red</option><option>Other</option></select>
      </div>
    </div>

    <!-- Always visible -->
    <div class="row">
      <div>
        <label data-i18n="s3.ins">Insurance</label>
        <select id="ins"><option>Valid</option><option>Expired</option><option>Renewal Applied</option></select>
      </div>
      <div>
        <label data-i18n="s3.puc">PUC</label>
        <select id="puc"><option>Valid</option><option>Expired</option></select>
      </div>
    </div>

    <!-- 15+ ONLY -->
    <div class="row hidden" id="ageOnly">
      <div>
        <label data-i18n="s3.rc">RC / Fitness</label>
        <select id="rc"><option>Valid</option><option>Expired</option><option>Renewal Applied</option></select>
      </div>
      <div>
        <label data-i18n="s3.gt">Green Tax</label>
        <select id="gt"><option>Paid</option><option>Not Paid</option></select>
      </div>
    </div>

    <div class="actions" style="margin-top:12px">
      <button class="btn" id="back3" data-i18n="back">Back</button>
      <button class="btn primary" id="next3" data-i18n="next">Continue</button>
    </div>
  </section>

  <!-- STEP 4: CONDITION -->
  <section class="card pad" id="s4" hidden>
    <h3 class="title" data-i18n="s4.title">Condition & Base</h3>
    <div class="row">
      <div>
        <label data-i18n="s4.cond">Overall Condition</label>
        <select id="cond"><option>OK</option><option>Good</option><option>Excellent</option><option>Poor</option></select>
      </div>
      <div>
        <label data-i18n="s4.newprice">Approx New Price (optional)</label>
        <input id="newPrice" type="number" min="10000" step="1000" placeholder="Ex-showroom"/>
      </div>
    </div>
    <div class="actions" style="margin-top:12px">
      <button class="btn" id="back4" data-i18n="back">Back</button>
      <button class="btn primary" id="calc" data-i18n="calc">Get Valuation</button>
    </div>
  </section>

  <!-- STEP 5: RESULT -->
  <section class="card pad" id="s5" hidden>
    <h3 class="title" data-i18n="s5.title">Your Estimated Price</h3>

    <div class="flex" style="gap:10px;flex-wrap:wrap;margin-bottom:10px">
      <span class="pill" id="typeTag">‚Äî</span>
      <span class="pill" id="brandTag">‚Äî</span>
      <span class="pill" id="yearTag">‚Äî</span>
      <span class="pill" id="kmTag">‚Äî</span>
      <span class="pill" id="seatTag">‚Äî</span>
      <span class="pill" id="bodyTag">‚Äî</span>
    </div>

    <div class="gauge"><div class="g1"></div><div class="g2"></div><div class="g3"></div></div>
    <div class="range">
      <div class="muted" data-i18n="res.low">Conservative</div>
      <div class="muted" data-i18n="res.avg">Average</div>
      <div class="muted" data-i18n="res.high">Excellent</div>
    </div>

    <div class="flex space" style="margin-top:12px;align-items:flex-end">
      <div>
        <div class="muted" data-i18n="res.range">Estimated Range</div>
        <div class="big"><span id="min">‚Çπ‚Äî</span> ‚Äî <span id="max">‚Çπ‚Äî</span></div>
      </div>
      <div>
        <div class="muted" data-i18n="res.mid">Most Likely</div>
        <div class="big" id="mid">‚Çπ‚Äî</div>
      </div>
    </div>

    <div class="divider"></div>
    <div class="row">
      <div>
        <label data-i18n="res.date">Pick Inspection Date</label>
        <input type="date" id="datePick">
      </div>
      <div>
        <label data-i18n="res.time">Time Slot</label>
        <select id="timePick"><option value="10-1">10am ‚Äì 1pm</option><option value="2-6">2pm ‚Äì 6pm</option></select>
      </div>
    </div>

    <div class="actions" style="margin-top:12px">
      <a id="wa" class="btn primary" target="_blank" rel="noopener">üí¨ WhatsApp</a>
      <a id="call" class="btn" href="tel:+919822292955">üìû Call Now</a>
      <button id="saveLead" class="btn ok" data-i18n="res.book">üöó Book Doorstep Inspection</button>
      <button id="again" class="btn" style="margin-left:auto" data-i18n="res.again">‚Ü∫ Recalculate</button>
    </div>

    <p class="muted" style="margin-top:10px" data-i18n="res.note">
      *Final price depends on physical inspection, RC/Insurance status and market demand.
    </p>
  </section>
</main>

<div id="toast" class="toast">Saved!</div>

<script>
/* ---------- CONFIG ---------- */
const GAS_URL = 'PASTE_YOUR_WEB_APP_URL_HERE';  'https://script.google.com/macros/s/AKfycbxtUUG42G136Xsg5d8FCzcBdasOZUfZHzNSaPoBlvIEZzjrTfiFPvKGDaCX7OZMM81oTw/exec';const THEME_KEY='secondwheel.theme';
const VID = (()=> Math.random().toString(36).slice(2,6)+'-'+Date.now().toString(36).slice(-4))();

/* ---------- THEME ---------- */
const themeBtn=document.getElementById('themeBtn');
function setTheme(t){ document.documentElement.setAttribute('data-theme',t); localStorage.setItem(THEME_KEY,t); themeBtn.textContent=t==='dark'?'üåô':'‚òÄÔ∏è'; }
themeBtn.onclick=()=> setTheme((localStorage.getItem(THEME_KEY)||'dark')==='dark'?'light':'dark');
setTheme(localStorage.getItem(THEME_KEY)||'dark');

/* ---------- I18N (short labels) ---------- */
const I18N={
  en:{title:'Instant Valuation', next:'Continue', back:'Back', calc:'Get Valuation',
      s1h:'1. Customer',s2h:'2. Vehicle',s3h:'3. Specs',s4h:'4. Condition',s5h:'5. Result',
      's1.title':'Customer Details','s1.name':'Name','s1.phone':'Mobile Number','s1.city':'City','s1.notes':'Notes (optional)',
      's2.title':'Vehicle Basics','s2.brand':'Brand','s2.model':'Model','s2.reg':'Registration No.','s2.seats':'Seats (auto)','s2.body':'Body Type (auto)',
      's3.title':'Specifications','s3.year':'Manufacturing Year','s3.km':'KMs Driven','s3.fuel':'Fuel','s3.trans':'Transmission','s3.owners':'Owners','s3.color':'Color','s3.ins':'Insurance','s3.puc':'PUC','s3.rc':'RC / Fitness','s3.gt':'Green Tax',
      's4.title':'Condition & Base','s4.cond':'Overall Condition','s4.newprice':'Approx New Price (optional)',
      's5.title':'Your Estimated Price','res.low':'Conservative','res.avg':'Average','res.high':'Excellent',
      'res.range':'Estimated Range','res.mid':'Most Likely','res.date':'Pick Inspection Date','res.time':'Time Slot','res.book':'Book Doorstep Inspection','res.again':'Recalculate','res.note':'*Final price depends on physical inspection, RC/Insurance status and market demand.'},
  hi:{title:'‡§á‡§Ç‡§∏‡•ç‡§ü‡•á‡§Ç‡§ü ‡§µ‡•à‡§≤‡•ç‡§Ø‡•Ç‡§è‡§∂‡§®', next:'‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡•á‡§Ç', back:'‡§µ‡§æ‡§™‡§∏', calc:'‡§µ‡•à‡§≤‡•ç‡§Ø‡•Ç‡§è‡§∂‡§® ‡§™‡§æ‡§è‡§Ç',
      s1h:'1. ‡§ó‡•ç‡§∞‡§æ‡§π‡§ï',s2h:'2. ‡§µ‡§æ‡§π‡§®',s3h:'3. ‡§µ‡§ø‡§µ‡§∞‡§£',s4h:'4. ‡§ï‡§Ç‡§°‡•Ä‡§∂‡§®',s5h:'5. ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ',
      's1.title':'‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§µ‡§ø‡§µ‡§∞‡§£','s1.name':'‡§®‡§æ‡§Æ','s1.phone':'‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞','s1.city':'‡§∂‡§π‡§∞','s1.notes':'‡§®‡•ã‡§ü‡•ç‡§∏ (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)',
      's2.title':'‡§µ‡§æ‡§π‡§® ‡§¨‡•á‡§∏‡§ø‡§ï‡•ç‡§∏','s2.brand':'‡§¨‡•ç‡§∞‡§æ‡§Ç‡§°','s2.model':'‡§Æ‡•â‡§°‡§≤','s2.reg':'‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§∂‡§® ‡§®‡§Ç‡§¨‡§∞','s2.seats':'‡§∏‡•Ä‡§ü‡•ç‡§∏ (‡§ë‡§ü‡•ã)','s2.body':'‡§¨‡•â‡§°‡•Ä ‡§ü‡§æ‡§á‡§™ (‡§ë‡§ü‡•ã)',
      's3.title':'‡§∏‡•ç‡§™‡•á‡§∏‡§ø‡§´‡§ø‡§ï‡•á‡§∂‡§®‡•ç‡§∏','s3.year':'‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§µ‡§∞‡•ç‡§∑','s3.km':'‡§ï‡§ø‡§Æ‡•Ä ‡§ö‡§≤‡•Ä','s3.fuel':'‡§´‡•ç‡§Ø‡•Ç‡§≤','s3.trans':'‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§Æ‡§ø‡§∂‡§®','s3.owners':'‡§ì‡§®‡§∞‡•ç‡§∏','s3.color':'‡§∞‡§Ç‡§ó','s3.ins':'‡§á‡§Ç‡§∂‡•ç‡§Ø‡•ã‡§∞‡•á‡§Ç‡§∏','s3.puc':'PUC','s3.rc':'RC/‡§´‡§ø‡§ü‡§®‡•á‡§∏','s3.gt':'‡§ó‡•ç‡§∞‡•Ä‡§® ‡§ü‡•à‡§ï‡•ç‡§∏',
      's4.title':'‡§ï‡§Ç‡§°‡•Ä‡§∂‡§® ‡§µ ‡§¨‡•á‡§∏','s4.cond':'‡§ì‡§µ‡§∞‡§ë‡§≤ ‡§ï‡§Ç‡§°‡•Ä‡§∂‡§®','s4.newprice':'‡§®‡§à ‡§ï‡•Ä‡§Æ‡§§ (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)',
      's5.title':'‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®‡§ø‡§§ ‡§ï‡•Ä‡§Æ‡§§','res.low':'‡§ï‡§Æ','res.avg':'‡§î‡§∏‡§§','res.high':'‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü',
      'res.range':'‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®‡§ø‡§§ ‡§∞‡•á‡§Ç‡§ú','res.mid':'‡§∏‡§¨‡§∏‡•á ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§ø‡§§','res.date':'‡§á‡§Ç‡§∏‡•ç‡§™‡•á‡§ï‡•ç‡§∂‡§® ‡§§‡§æ‡§∞‡•Ä‡§ñ','res.time':'‡§∏‡§Æ‡§Ø','res.book':'‡§°‡•ã‡§∞‡§∏‡•ç‡§ü‡•á‡§™ ‡§á‡§Ç‡§∏‡•ç‡§™‡•á‡§ï‡•ç‡§∂‡§® ‡§¨‡•Å‡§ï ‡§ï‡§∞‡•á‡§Ç','res.again':'‡§™‡•Å‡§®: ‡§ó‡§£‡§®‡§æ','res.note':'*‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§ï‡•Ä‡§Æ‡§§ ‡§´‡§ø‡§ú‡§ø‡§ï‡§≤ ‡§á‡§Ç‡§∏‡•ç‡§™‡•á‡§ï‡•ç‡§∂‡§®, RC/‡§á‡§Ç‡§∂‡•ç‡§Ø‡•ã‡§∞‡•á‡§Ç‡§∏ ‡§∏‡•ç‡§ü‡•á‡§ü‡§∏ ‡§î‡§∞ ‡§Æ‡§æ‡§Ç‡§ó ‡§™‡§∞ ‡§®‡§ø‡§∞‡•ç‡§≠‡§∞ ‡§π‡•à‡•§'},
  mr:{title:'‡§á‡§®‡•ç‡§∏‡•ç‡§ü‡§Ç‡§ü ‡§µ‡•ç‡§π‡•Ö‡§≤‡•ç‡§Ø‡•Å‡§è‡§∂‡§®', next:'‡§™‡•Å‡§¢‡•á', back:'‡§Æ‡§æ‡§ó‡•á', calc:'‡§µ‡•ç‡§π‡•Ö‡§≤‡•ç‡§Ø‡•Å‡§è‡§∂‡§® ‡§ò‡•ç‡§Ø‡§æ',
      s1h:'1. ‡§ó‡•ç‡§∞‡§æ‡§π‡§ï',s2h:'2. ‡§µ‡§æ‡§π‡§®',s3h:'3. ‡§§‡§™‡§∂‡•Ä‡§≤',s4h:'4. ‡§ï‡§Ç‡§°‡•Ä‡§∂‡§®',s5h:'5. ‡§®‡§ø‡§ï‡§æ‡§≤',
      's1.title':'‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä','s1.name':'‡§®‡§æ‡§µ','s1.phone':'‡§Æ‡•ã‡§¨‡§æ‡§à‡§≤','s1.city':'‡§∂‡§π‡§∞','s1.notes':'‡§®‡•ã‡§ü‡•ç‡§∏ (‡§ë‡§™‡•ç‡§∂‡§®‡§≤)',
      's2.title':'‡§µ‡§æ‡§π‡§® ‡§¨‡•á‡§∏‡§ø‡§ï‡•ç‡§∏','s2.brand':'‡§¨‡•ç‡§∞‡§Å‡§°','s2.model':'‡§Æ‡•â‡§°‡•á‡§≤','s2.reg':'‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä ‡§ï‡•ç‡§∞.','s2.seats':'‡§∏‡•Ä‡§ü‡•ç‡§∏ (‡§ë‡§ü‡•ã)','s2.body':'‡§¨‡•â‡§°‡•Ä ‡§ü‡§æ‡§á‡§™ (‡§ë‡§ü‡•ã)',
      's3.title':'‡§∏‡•ç‡§™‡•á‡§∏‡§ø‡§´‡§ø‡§ï‡•á‡§∂‡§®‡•ç‡§∏','s3.year':'‡§®‡§ø‡§∞‡•ç‡§Æ‡§ø‡§§‡•Ä ‡§µ‡§∞‡•ç‡§∑','s3.km':'‡§ï‡§ø‡§Æ‡•Ä ‡§ö‡§æ‡§≤‡§≤‡•á‡§≤‡•Ä','s3.fuel':'‡§á‡§Ç‡§ß‡§®','s3.trans':'‡§ó‡§ø‡§Ö‡§∞‡§¨‡•â‡§ï‡•ç‡§∏','s3.owners':'‡§Æ‡§æ‡§≤‡§ï','s3.color':'‡§∞‡§Ç‡§ó','s3.ins':'‡§á‡§®‡•ç‡§∂‡•Å‡§∞‡§®‡•ç‡§∏','s3.puc':'PUC','s3.rc':'RC/‡§´‡§ø‡§ü‡§®‡•á‡§∏','s3.gt':'‡§ó‡•ç‡§∞‡•Ä‡§® ‡§ü‡•Ö‡§ï‡•ç‡§∏',
      's4.title':'‡§ï‡§Ç‡§°‡•Ä‡§∂‡§® ‡§µ ‡§¨‡•á‡§∏','s4.cond':'‡§è‡§ï‡•Ç‡§£ ‡§ï‡§Ç‡§°‡•Ä‡§∂‡§®','s4.newprice':'‡§®‡§µ‡•Ä‡§® ‡§ï‡§ø‡§Ç‡§Æ‡§§ (‡§ë‡§™‡•ç‡§∂‡§®‡§≤)',
      's5.title':'‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§Ö‡§Ç‡§¶‡§æ‡§ú‡•á ‡§ï‡§ø‡§Ç‡§Æ‡§§','res.low':'‡§ï‡§Æ‡•Ä','res.avg':'‡§∏‡§æ‡§ß‡§æ‡§∞‡§£','res.high':'‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü',
      'res.range':'‡§Ö‡§Ç‡§¶‡§æ‡§ú‡•á ‡§∞‡•á‡§Ç‡§ú','res.mid':'‡§¨‡§π‡•Å‡§ß‡§æ','res.date':'‡§á‡§®‡•ç‡§∏‡•ç‡§™‡•á‡§ï‡•ç‡§∂‡§® ‡§§‡§æ‡§∞‡•Ä‡§ñ','res.time':'‡§µ‡•á‡§≥','res.book':'‡§°‡•ã‡§Ö‡§∞‡§∏‡•ç‡§ü‡•á‡§™ ‡§á‡§®‡•ç‡§∏‡•ç‡§™‡•á‡§ï‡•ç‡§∂‡§® ‡§¨‡•Å‡§ï ‡§ï‡§∞‡§æ','res.again':'‡§™‡•Å‡§®‡•ç‡§π‡§æ ‡§ï‡•Ö‡§≤‡•ç‡§ï‡•ç‡§Ø‡•Å‡§≤‡•á‡§ü','res.note':'*‡§´‡§æ‡§Ø‡§®‡§≤ ‡§ï‡§ø‡§Ç‡§Æ‡§§ ‡§´‡§ø‡§ú‡§ø‡§ï‡§≤ ‡§á‡§®‡•ç‡§∏‡•ç‡§™‡•á‡§ï‡•ç‡§∂‡§®, RC/‡§á‡§®‡•ç‡§∂‡•Å‡§∞‡§®‡•ç‡§∏ ‡§∏‡•ç‡§ü‡•á‡§ü‡§∏ ‡§µ ‡§Æ‡§æ‡§ó‡§£‡•Ä‡§µ‡§∞ ‡§Ö‡§µ‡§≤‡§Ç‡§¨‡•Ç‡§® ‡§Ü‡§π‡•á.'}
};
function t(k){ const l=localStorage.getItem('sw.lang')||'en'; return (I18N[l]&&I18N[l][k])||I18N.en[k]||k; }
function applyLang(l){
  localStorage.setItem('sw.lang', l);
  document.querySelectorAll('[data-i18n]').forEach(el=>{ const k=el.getAttribute('data-i18n'); el.textContent=t(k); });
  document.querySelectorAll('#langSeg button').forEach(b=>b.classList.toggle('active', b.dataset.lang===l));
}
applyLang(localStorage.getItem('sw.lang')||'en');
document.getElementById('langSeg').addEventListener('click',e=>{
  const b=e.target.closest('button'); if(!b) return; applyLang(b.dataset.lang);
});

/* ---------- Helpers ---------- */
const $ = id => document.getElementById(id);
const toast=m=>{const t=document.getElementById('toast');t.textContent=m;t.classList.add('show');clearTimeout(window.__t);window.__t=setTimeout(()=>t.classList.remove('show'),1400);};
function go(i){
  const S=[ 's1','s2','s3','s4','s5' ];
  const H=[ 's1h','s2h','s3h','s4h','s5h' ];
  S.forEach((id,idx)=> $(id).hidden = idx!==i);
  H.forEach((id,idx)=> $(id).classList.toggle('active', idx<=i));
  $('bar').style.width = (i/4*100)+'%';
  window.scrollTo({top:0,behavior:'smooth'});
}
function ownersVal(s){ return s.startsWith('1')?1:s.startsWith('2')?2:s.startsWith('3')?3:4; }
function rupee(n){ try{return '‚Çπ'+Number(n).toLocaleString('en-IN');}catch{return '‚Çπ'+n} }
function nowYear(){ return (new Date()).getFullYear(); }

/* ---------- Catalog (auto-learn) ---------- */
let CATALOG=[];
async function loadCatalog(){
  try{
    const res = await fetch(GAS_URL+'?action=catalog_get');
    const j = await res.json().catch(()=>null);
    if(j && j.ok && Array.isArray(j.items)) CATALOG = j.items;
  }catch(e){ /* silent */ }
}
function strongBrand(type,brand){
  brand=String(brand||'').toUpperCase();
  if(type==='car'||type==='ev_car') return ['MARUTI','HYUNDAI','HONDA','TOYOTA','TATA','KIA','MAHINDRA'].some(b=>brand.includes(b));
  if(type==='bike'||type==='ev_2w') return ['HERO','HONDA','BAJAJ','ROYAL ENFIELD','TVS','SUZUKI','YAMAHA'].some(b=>brand.includes(b));
  return ['HONDA','HERO','TVS','SUZUKI','YAMAHA'].some(b=>brand.includes(b));
}
function keywordBody(brand,model){
  const s=(brand+' '+model).toLowerCase();
